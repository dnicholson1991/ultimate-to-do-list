<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.customsolutions.android.utl"
    android:installLocation="auto"
    android:versionCode="350000"
    android:versionName="3.5" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="com.android.vending.BILLING" />
    <uses-permission android:name="utl_permission" />
    <uses-permission android:name="com.customsolutions.android.utl_tab_permission" />

    <!-- We need to specify that certain features are optional, to avoid hiding our app unnecessarily -->
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location.network"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location.gps"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.microphone"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.bluetooth"
        android:required="false" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/UtlStylePacific" >
        <activity
            android:name="com.customsolutions.android.utl.main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.customsolutions.android.utl.BeginSetup" />
        <activity android:name="com.customsolutions.android.utl.GetAccountName" />
        <activity android:name="com.customsolutions.android.utl.EditTask" />
        <activity
            android:name="com.customsolutions.android.utl.DateChooser"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.AdvancedRepeatPopup"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.TagPicker"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.ItemPicker"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.StringItemPicker"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.TaskList" >
            <meta-data
                android:name="android.support.UI_OPTIONS"
                android:value="splitActionBarWhenNarrow" />
        </activity>
        <activity android:name="com.customsolutions.android.utl.ViewTask" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
        </activity>

        <service android:name="com.customsolutions.android.utl.Synchronizer" />

        <activity
            android:name="com.customsolutions.android.utl.ToodledoLoginInfoV3"
            android:configChanges="orientation|screenSize" />
        <activity
            android:name="com.customsolutions.android.utl.ViewRulesList"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditTextViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditBooleanViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditIntViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditMultChoiceViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditLocationViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditMultStringsViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditDateViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditDueDateViewRule"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.SaveView"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.SortOrder"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditDisplayOptions"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.NoteList" >
            <meta-data
                android:name="android.support.UI_OPTIONS"
                android:value="splitActionBarWhenNarrow" />
        </activity>
        <activity android:name="com.customsolutions.android.utl.PrefsActivity" />
        <activity
            android:name="com.customsolutions.android.utl.AccountOps"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.FieldsUsed" />
        <activity
            android:name="com.customsolutions.android.utl.QuickSearch"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.Help"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.UploadLog"
            android:theme="@style/UtlStylePacific.Popup" />

        <service android:name="com.customsolutions.android.utl.DatabaseCleaner" />
        <service android:name="com.customsolutions.android.utl.ServerRegistration" />
        <service android:name="com.customsolutions.android.utl.LocationChecker" />

        <activity
            android:name="com.customsolutions.android.utl.TrialExpired"
            android:configChanges="orientation|screenSize" />
        <activity
            android:name="com.customsolutions.android.utl.WidgetDisplayOptions"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.WidgetOptions"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.TaskMap" />
        <activity
            android:name="com.customsolutions.android.utl.GTasksSetup"
            android:configChanges="orientation|screenSize" />
        <activity android:name="com.customsolutions.android.utl.ChoosePresetFieldsFunctions" />
        <activity
            android:name="com.customsolutions.android.utl.CollaboratorsList"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.GenericListActivity" />
        <activity android:name="com.customsolutions.android.utl.EditContextActivity" />
        <activity android:name="com.customsolutions.android.utl.EditFolderActivity" />
        <activity android:name="com.customsolutions.android.utl.EditGoalActivity" />
        <activity
            android:name="com.customsolutions.android.utl.EditTagActivity"
            android:configChanges="orientation|screenSize" />
        <activity android:name="com.customsolutions.android.utl.EditViewActivity" />
        <activity
            android:name="com.customsolutions.android.utl.EditLocationActivity"
            android:configChanges="orientation|screenSize" />
        <activity android:name="com.customsolutions.android.utl.ViewNote" />
        <activity android:name="com.customsolutions.android.utl.EditNoteActivity" />
        <activity
            android:name="com.customsolutions.android.utl.EditTaskPopup"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" >
            <intent-filter>
                <action android:name="android.intent.action.EDIT" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="http" />
                <data android:host="edit.todolist.co" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.customsolutions.android.utl.ViewTaskPopup"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.SnoozePopup"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.ColorCodeReference"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.WhatsNew"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.LicenseUpgradeNotice"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.EditNotePopup"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.VoiceCommand"
            android:icon="@drawable/voice_icon"
            android:label="@string/Voice_Mode"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" >
            <intent-filter>
                <action android:name="android.intent.action.EDIT" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.customsolutions.android.utl.VoiceCommandConfirm"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity
            android:name="com.customsolutions.android.utl.VoiceCommandRead"
            android:theme="@style/UtlStylePacific.Popup" />
        <activity android:name="com.customsolutions.android.utl.BetaExpired" />
        <activity
            android:name="com.customsolutions.android.utl.AndroidWearHelp"
            android:theme="@style/UtlStylePacific.Popup" />

        <!--
             This activity does nothing more than receive text from other apps and directs the user to the 
			Activity that should handle the text
        -->
        <activity
            android:name="com.customsolutions.android.utl.TextReceiver"
            android:label="@string/app_name"
            android:launchMode="singleTask"
            android:taskAffinity="com.customsolutions.android.utl.popups"
            android:theme="@style/UtlStylePacific.Popup" >
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <action android:name="com.google.android.gm.action.AUTO_SEND" />
                <action android:name="com.google.android.voicesearch.action.AUTO_SEND" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="com.google.android.voicesearch.SELF_NOTE" />

                <data android:mimeType="text/*" />
            </intent-filter>
        </activity>

        <!-- Special Activity to Create a "New Task" shortcut -->
        <activity
            android:name="com.customsolutions.android.utl.ShortcutMakerNewTask"
            android:icon="@drawable/new_task_widget"
            android:label="@string/Widget_Name_New_Task" >
            <intent-filter>
                <action android:name="android.intent.action.CREATE_SHORTCUT" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <!-- Special Activity to Create a Voice Mode shortcut -->
        <activity
            android:name="com.customsolutions.android.utl.ShortcutMakerVoiceMode"
            android:icon="@drawable/voice_icon"
            android:label="@string/Shortcut_Name_Voice_Mode" >
            <intent-filter>
                <action android:name="android.intent.action.CREATE_SHORTCUT" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <!-- This Receiver handles text content and directs the user to the appropriate Activity -->
        <receiver
            android:name="com.customsolutions.android.utl.Notifier"
            android:exported="true" />
        <receiver
            android:name="com.customsolutions.android.utl.LicenseReceiver"
            android:exported="true" />

        <service
            android:name="com.customsolutions.android.utl.LicenseAppQuery"
            android:exported="true" />
        <service android:name="com.customsolutions.android.utl.EventLogger" />

        <receiver android:name="com.customsolutions.android.utl.BootupHandler" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.EXTERNAL_APPLICATIONS_AVAILABLE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.customsolutions.android.utl.HandleTimeZoneChange" >
            <intent-filter>
                <action android:name="android.intent.action.TIMEZONE_CHANGED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

        <!-- Implements communication with Android Wear Device -->
        <service
            android:name="com.customsolutions.android.utl.WearService"
            android:exported="true" >
            <intent-filter>
                <action android:name="com.google.android.gms.wearable.BIND_LISTENER" />
            </intent-filter>
        </service>

        <!-- Task List Widgets for various sizes -->
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget2x2"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_2x2" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_2x2" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget2x3"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_2x3" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_2x3" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget2x4"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_2x4" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_2x4" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget3x2"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_3x2" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_3x2" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget3x3"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_3x3" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_3x3" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget3x4"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_3x4" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_3x4" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget4x2"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_4x2" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_4x2" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget4x3"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_4x3" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_4x3" />
        </receiver>
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidget4x4"
            android:enabled="@bool/is_pre_api_11"
            android:label="@string/Task_List_4x4" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_4x4" />
        </receiver>

        <!-- Scrollable Widget (Android 3 and up) -->
        <receiver
            android:name="com.customsolutions.android.utl.TaskListWidgetScrollable"
            android:enabled="@bool/is_post_api_11"
            android:label="@string/Widget_Name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/task_list_scrollable" />
        </receiver>

        <service
            android:name="com.customsolutions.android.utl.ScrollableWidgetServiceCompact"
            android:permission="android.permission.BIND_REMOTEVIEWS" />
        <service
            android:name="com.customsolutions.android.utl.ScrollableWidgetServiceNormal"
            android:permission="android.permission.BIND_REMOTEVIEWS" />

        <!-- Content Provider for Android Agenda Widget -->
        <provider
            android:name="com.customsolutions.android.utl.AndroidAgendaProvider"
            android:authorities="com.customsolutions.android.utl.androidagendaprovider" />

        <!-- Content Provider for Pure Calendar Widget -->
        <provider
            android:name="com.customsolutions.android.utl.PureCalendarProvider"
            android:authorities="com.customsolutions.android.utl.purecalendarprovider" />

        <!-- Broadcast receiver for UTL widgets.  Used for task completion: -->
        <receiver
            android:name="com.customsolutions.android.utl.TaskUpdateReceiver"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.customsolutions.android.utl.TaskUpdateReceiver.ACTION_COMPLETE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.customsolutions.android.utl.TaskUpdateReceiver.ACTION_EDIT" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
        </receiver>

        <!-- Broadcast receiver for Pure Calendar Widget (handles task updates) -->
        <receiver
            android:name="com.customsolutions.android.utl.PureCalendarReceiver"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.customsolutions.android.utl.purecalendarprovider.ACTION_COMPLETE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.customsolutions.android.utl.purecalendarprovider.ACTION_DELETE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
        </receiver>

        <!-- Broadcast receiver for Android Agenda Widget.  Handles task completion -->
        <receiver
            android:name="com.customsolutions.android.utl.AndroidAgendaReceiver"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.customsolutions.android.utl.androidagendaprovider.ACTION_COMPLETE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="vnd.android.cursor.item/vnd.customsolutions.tasks" />
            </intent-filter>
        </receiver>

        <!-- Broadcast receiver for Amazon in-app purchasing: -->
        <receiver android:name="com.amazon.device.iap.ResponseReceiver" >
            <intent-filter>
                <action
                    android:name="com.amazon.inapp.purchasing.NOTIFY"
                    android:permission="com.amazon.inapp.purchasing.Permission.NOTIFY" />
            </intent-filter>
        </receiver>

        <!-- Receiver used by Google conversion tracking, with new app install info: -->
        <receiver
            android:name="com.google.ads.conversiontracking.InstallReceiver"
            android:exported="true" >
            <intent-filter>
                <action android:name="com.android.vending.INSTALL_REFERRER" />
            </intent-filter>
        </receiver>

        <!-- Adds support for Google Mapping: -->
        <uses-library
            android:name="com.google.android.maps"
            android:required="false" />

        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />
    </application>

</manifest>